<!DOCTYPE html>
<head>
	<title>DWD</title>
  <meta name="author" content="DJ">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="mobile-web-app-capable" content="yes">
	<link rel="icon" sizes="128x128" href="pics/icon.png">

<style>
html {height:99%;}
body {height:99%; font-family:Helvetica;background:#CCCCCC;}
</style>
<script></script>
</head>
<body>
<span id="warn">no warning</span>

<script>
navigator.serviceWorker.register('sw.js');
	
function showNotification(tx) {
  Notification.requestPermission(function(result) {
    if (result === 'granted') {
      navigator.serviceWorker.ready.then(function(registration) {
        registration.showNotification('Vibration Sample', {
          body: 'Buzz! '+new Date(tx).toTimeString(),  //Buzz!
          icon: '../images/touch/chrome-touch-icon-192x192.png',
          vibrate: [200, 100, 200, 100, 200, 100, 200],
          tag: 'vibration-sample'
        });
      });
    }
  });
}
	
if(typeof(Notification) != "undefined") Notification.requestPermission();  //
var warnWetter = function(a) {}
warnWetter.loadWarnings = function(a) { 
b=location.search.slice(1)||8097610000  //Augsburg   ?108111000
if(1*b) {
a=a.warnings[b]; var c=a
a=a||"no warning"
document.getElementById("warn").innerHTML=JSON.stringify(a)
//document.getElementById("warn").title=new Date(a[0].start).toTimeString()+" - "+new Date(a[0].end).toTimeString()
//if(c) new Notification(" warning",{tag:"1"})  // not chrome android!
if(c) showNotification(a[0].start) }
else console.log("todo")
  }

function update() {
var script = document.createElement('script');
script.src = "https://www.dwd.de/DWD/warnungen/warnapp/json/warnings.json"
document.head.replaceChild(script,document.getElementsByTagName("script")[0])
setTimeout(function(){update()},10*60000)  //
}; if(navigator.onLine) update()
</script>
</body>
</html>
